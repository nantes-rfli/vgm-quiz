name = "vgm-quiz-pipeline"
main = "src/index.ts"
compatibility_date = "2025-10-10"

[vars]
# JWT secret is unused by pipeline today but required for shared Env type
JWT_SECRET = "dev-secret-key-please-replace-in-production-with-strong-random-value"
BACKUP_PREFIX = "backups/daily"
BACKUP_EXPORT_DAYS = "14"

[observability]
enabled = true

[[d1_databases]]
binding = "DB"
database_name = "vgm-quiz-db"
database_id = "718334d1-16a3-44be-8f3d-10b8cd7f9288"
migrations_dir = "../migrations"

[[r2_buckets]]
binding = "STORAGE"
bucket_name = "vgm-quiz-storage"

[triggers]
crons = ["0 15 * * *"]  # Daily at 15:00 UTC = 00:00 JST (next day)
