# Phase 4 Issue Drafts

本ファイルは GitHub Issue 起票用のドラフトです。必要に応じてコピペしてタイトル・ラベルを調整してください。

---

## Issue 1: Phase 4A - マルチソース自動収集 PoC → ガード付き本番化
- **目的**: YouTube → Spotify → Apple Music の順で Discovery/Harvest/Guard/Dedup パイプラインを構築し、日次自動取り込みを無停止化する。
- **スコープ**:
  - YouTube 公式/レーベル/高品質プレイリストの3層ソースを定義し、フェイルオーバーを Runbook 化
  - 収集クォータ枯渇時のバックオフ、失敗検知、ロールバックを Phase 3 メトリクス/アラートに接続
  - 重複検知（YouTube ID / ISRC / タイトル正規化）と品質チェック（LUFS/無音率/メタ抽出精度）
- **非スコープ**: ML 品質スコアリングの本格導入、Apple Music の本番化（評価まで）
- **成果物**: Pipeline 実装、Runbook、メトリクス/アラート設定、サンプル取り込みデータ
- **成功指標**:
  - 追加トラック数/週（目安: 50+）
  - 重複率 < 5%
  - 取り込み失敗率 < 1%、MTTR < 15分
  - 品質監査パス率 > 95%
- **タスク案**:
  - [ ] ソースリスト作成（公式→レーベル→高品質プレイリスト）と除外基準定義
  - [ ] Discovery/Harvest PoC（YouTube）＋メトリクス配線
  - [ ] Guard/Dedup 実装＋ロールバック手順
  - [ ] Spotify 取り込み適用（ISRC/作曲者メタ強化）
  - [ ] Runbook 仕上げ＋日次スケジュールで試験
  - [ ] フェイルセーフ/ロールバックの検証（クォータ枯渇・権利/違反検知時の自動停止と復旧手順をテスト）

---

## Issue 2: Phase 4B - 作曲者モード付き適応型ゲームプレイ (Adaptive Gameplay MLP)
- **目的**: 行動データに基づく難易度オートチューニング＋新モード「作曲者モード」を A/B 測定付きで提供し、完走率/再訪率を向上させる。
- **スコープ**:
  - 難易度スコア算出ロジック初版（正答率・回答時間ベース）
  - 作曲者モードの出題条件・UI 追加（最小変更）
  - A/B 割付・ログ・ダッシュボード接続（Phase 3 メトリクス活用）
- **非スコープ**: 恒久的なパーソナライズ、他モード追加
- **成功指標**:
  - トリートメント群で完走率/再訪率が統計的に有意に改善
  - 目標難易度帯への収束が観測される
- **タスク案**:
  - [ ] 作曲者モード仕様確定（選択肢生成・表示テキスト・i18n）
  - [ ] 難易度スコア算出とサーバー配信条件実装（Feature Flag付き）
  - [ ] A/B 割付とログ出力をダッシュボードに統合
  - [ ] フロントUI/MWS/Playwright の追加シナリオ
  - [ ] ガードレール（異常値検知・ロールバック手順）記述
  - [ ] composer 欠損率モニタリング＋フォールバック実装（欠損>5%で除外/補完、アラート発火を確認）
  - [ ] A/B 計測ガード（完走/再訪/回答時間が全群で計測されることを自動テストで担保）

---

## Issue 3: Phase 4C - シェアチャレンジ & 軽量ソーシャル v1
- **目的**: 署名付きチャレンジリンクと OGP 最適化で共有→再訪を計測し、将来のリーダーボード導入に備える。
- **スコープ**:
  - チャレンジリンク仕様（署名パラメータ、有効期限）と検証エンドポイント
  - 共有UI と OGP/Twitter Card 更新
  - 共有率/CTR/完走率のメトリクスとアラート
  - 簡易不正防止（リプレイ抑止・レート制限）
- **非スコープ**: 恒久的なリーダーボード実装
- **成功指標**:
  - 共有率・共有経由CTR・完走率が継続計測され、異常時に検知できる
  - フェイルセーフ発火率を低水準に維持
- **タスク案**:
  - [ ] 署名付きチャレンジリンク仕様策定
  - [ ] バックエンド検証＋レート制限実装
  - [ ] フロント共有UI＋OGP テンプレ更新
  - [ ] メトリクス/アラート追加、MSW/Playwright テスト追加
  - [ ] リーダーボード拡張前提のメモを残す
