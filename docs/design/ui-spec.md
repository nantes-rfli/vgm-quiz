# UI Specification (VGM Quiz MVP)

* Status: Approved
* Last Updated: 2025-09-19

## この文書の目的

MVPで提供する4画面（`/`, `/play`, `/result`, `/about`）のUI/UX仕様を**一枚**に集約する。

## 1. 画面構成（Site Map）

* `/` … スタート / 遊び方
* `/play` … **出題/回答**（カウントダウン・選択・決定）→ **結果表示（Question Reveal Card）** → 次へ
* `/result` … 合計スコア・正解数・各問の残秒/正誤・視聴導線一覧
* `/about` … 出典・注意書き（法務）

## 2. 主要フロー（要点）

* 初回アクセス → **スタート** → `/play` 初期値10問（各問：出題→結果表示） → `/result`

## 3. 画面別仕様（要点）

### `/`

* 要素：スタート、遊び方、音量/ミュート（効果音がある場合のみ）
* 操作：**Space**でスタート、**Enter**でフォーカス決定
* ナビ：ヘッダーに**設定（インライン再生ON/OFF）**への導線（ドロップダウン等）

### `/play`

* 要素（出題状態）：問題番号、残り時間（15s）、**選択肢4つ**、**決定ボタン**、**スキップ**
* ショートカット：**1–4**（選択）、**Enter**（決定）、**S**（スキップ）
* エラー表示（出題状態）：重大なデータ欠損等のみを**System Skip**判定（バックアップ差替）
* A11y：フォーカス可視、ロービジョン配慮（AAコントラスト）、ロール/ラベル明示

#### Question Reveal Card（各問の結果表示）

* 目的：正誤・解説・**視聴導線**・（任意）アートワークを提示し、次の問題へスムーズに遷移
* 構成：

  * 正誤ステータス（色/アイコン＋テキスト）
  * 楽曲メタ（曲名／作品名／作曲者など最小限）
  * **視聴導線**

    * 既定：**外部リンク**（「Listen on …」ボタン、`target="_blank" rel="noopener noreferrer"`）
    * 設定「**インライン再生ON**」時のみ、**公式プレーヤー埋め込み**（自動再生なし／UI非改変）
    * 埋め込み初期化や再生が失敗・地域制限等→**即リンク表示へ切替**（小さなトーストで明示）
  * **アートワーク（任意）**

    * 外部参照画像のみ（自前保管しない）。`width/height` 事前指定、`alt` 必須、`loading="lazy"`
    * 指定がある場合は**画像プロキシ**経由で最適化（変換/キャッシュ）。失敗時はプレースホルダ
* 操作：**N** またはボタンで「次へ」

### `/result`

* 表示：合計スコア、正解数、各問サマリ（正誤・残秒）
* 視聴導線：各問ごとに**リンク**（既定）／設定ON時は**埋め込み**も可

  * プレイリスト誘導は将来拡張（現時点は個別リンクのみ）
* 共有：URLコピー（任意）
* A11y/Perf：画像は遅延読込、プレーヤーは設定ON時のみ生成

### `/about`

* 表示：出典／注意書き
　*クイズ中に外部ストリーミングを再生しない旨、結果でのみ公式視聴先を案内する旨

## 4. コンポーネント（抜粋）

* **ChoiceList**（4択・キーボード操作対応）
* **Timer**（15s、残り5sで強調）
* **SkipButton**（0点）
* **RevealCard**（正誤／視聴導線／アートワーク／次へ）
* **ResultSummary**（10問一覧）
* **SettingsDropdown**（インライン再生トグル：既定OFF）

## 5. A11y / パフォーマンス（共通）

* フォーカス可視、AAコントラスト、`aria-label` 付与（例：`aria-label="Listen on YouTube"`）
* 画像：`width/height` 指定→CLS回避、`loading="lazy"`
* スクリプト予算：初回JS（gzip）≤ 150KB 目安
* 計測語彙は `docs/api/api-spec.md` に準拠（例：`reveal_open_external`, `embed_impression`, `embed_play`, `embed_error`, `embed_fallback_to_link`, `settings_inline_toggle`）

## 備考

* ベンダーごとの詳細ルール（自動再生禁止、UI非改変、埋め込み可否、フォールバック手順等）は **`docs/product/media-integrations.md`** に集約。
* 本仕様はUI/UXの**画面挙動**に焦点を当て、実装/データ/APIの詳細は各ドキュメント（`data/model.md`, `api/api-spec.md`）を参照。
